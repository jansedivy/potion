/**
 * potion - v0.0.8
 * Copyright (c) 2014, Jan Sedivy
 *
 * Compiled: 2014-02-09
 *
 * potion is licensed under the MIT License.
 */
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Potion=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./src/engine");b.exports={init:function(a,b){var d=new c(a,b);return d.game}}},{"./src/engine":2}],2:[function(a,b){var c=a("./video"),d=a("./game"),e=a("./raf"),f=function(a,b){var e=function(a){d.call(this,a)};e.prototype=Object.create(d.prototype);for(var f in b)e.prototype[f]=b[f];this.game=new e(a),this.video=this.game.video=new c(a),this.game.config(),this.setupCanvasSize(),this.game.sprite.load(this.game.load.sprite,this.game.load.spriteImage,this.start.bind(this))};f.prototype.addEvents=function(){var a=this;window.addEventListener("resize",function(){a.setupCanvasSize()}),window.addEventListener("blur",function(){a.game.input.resetKeys(),a.game.blur()}),window.addEventListener("focus",function(){a.game.input.resetKeys(),a.game.focus()})},f.prototype.setupCanvasSize=function(){this.game.resize(),this.video.canvas.width=this.game.width,this.video.canvas.height=this.game.height,this.game.isRetina&&this.video.scale(2)},f.prototype.start=function(){this.game.start(),this.addEvents(),this.startFrame()},f.prototype.startFrame=function(){this._time=Date.now();var a=this;e(function(){a.tick()})},f.prototype.tick=function(){var a=(Date.now()-this._time)/1e3;a>.016&&(a=.016),this.update(a),this.render(),this.startFrame()},f.prototype.update=function(a){this.game.update(a)},f.prototype.render=function(){this.video.ctx.clearRect(0,0,this.game.width,this.game.height),this.game.render()},b.exports=f},{"./game":3,"./raf":6,"./video":10}],3:[function(a,b){var c=a("./input"),d=a("./spriteSheetManager"),e=a("./retina"),f=function(a){this.canvas=a,this.width=300,this.height=300,this.load={},this.sprite=new d,this.isRetina=e(),this.input=new c(this)};f.prototype.config=function(){},f.prototype.resize=function(){},f.prototype.render=function(){},f.prototype.update=function(){},f.prototype.keypress=function(){},f.prototype.click=function(){},f.prototype.mousemove=function(){},f.prototype.focus=function(){},f.prototype.blur=function(){},b.exports=f},{"./input":4,"./retina":7,"./spriteSheetManager":8}],4:[function(a,b){var c=a("./keys"),d=function(a){this.game=a,this.keys={},this.canControlKeys=!0,this.mouse={isDown:!1,position:{x:null,y:null}},this._addEvents()};d.prototype.resetKeys=function(){this.keys={}},d.prototype.isKeyDown=function(a){return this.canControlKeys?this.keys[c[a.toUpperCase()]]:void 0},d.prototype._addEvents=function(){var a=this,b=this.game.canvas;b.addEventListener("mousemove",function(b){a.game.mousemove(b.offsetX,b.offsetY),a.mouse.position.x=b.offsetX,a.mouse.position.y=b.offsetY}),b.addEventListener("mouseup",function(){a.mouse.isDown=!1}),b.addEventListener("mousedown",function(b){a.mouse.position.x=b.offsetX,a.mouse.position.y=b.offsetY,a.mouse.isDown=!0}),b.addEventListener("click",function(b){a.game.click(b.offsetX,b.offsetY)}),document.addEventListener("keypress",function(b){a.game.keypress(b.keyCode)}),document.addEventListener("keydown",function(b){a.game.input.keys[b.keyCode]=!0}),document.addEventListener("keyup",function(b){a.game.input.keys[b.keyCode]=!1})},b.exports=d},{"./keys":5}],5:[function(a,b){b.exports={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190}},{}],6:[function(a,b){b.exports=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()},{}],7:[function(a,b){var c=function(){var a="(-webkit-min-device-pixel-ratio: 1.5),  (min--moz-device-pixel-ratio: 1.5),  (-o-min-device-pixel-ratio: 3/2),  (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(a).matches?!0:!1};b.exports=c},{}],8:[function(a,b){var c=a("./utils").getJSON,d=function(){this.data={},this.image=null};d.prototype.load=function(a,b,d){if(!a)return d();var e=this,f=new Image;f.onload=function(){e.image=f,d()},c(a,function(a){e.data=a,f.src=b})},d.prototype.get=function(a){return this.data[a]},b.exports=d},{"./utils":9}],9:[function(a,b,c){c.getJSON=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){var a=JSON.parse(this.response);b(a)},c.send()}},{}],10:[function(a,b){var c=function(a){this.canvas=a,this.ctx=a.getContext("2d")};c.prototype.scale=function(a){this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px",this.canvas.width*=a,this.canvas.height*=a,this.ctx.scale(a,a)},c.prototype.sprite=function(a,b,c,d){c=Math.floor(c),d=Math.floor(d);var e=b.width,f=b.height,g=e,h=f;b.source_image.match(/@2x.png$/)&&(g/=2,h/=2),this.ctx.drawImage(a,b.x,b.y,e,f,c,d,g,h)},b.exports=c},{}]},{},[1])(1)});