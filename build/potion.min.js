/**
 * potion - v0.1.1
 * Copyright (c) 2014, Jan Sedivy
 *
 * Compiled: 2014-02-21
 *
 * potion is licensed under the MIT License.
 */
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Potion=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./src/engine");b.exports={init:function(a,b){var d=new c(a,b);return d.game}}},{"./src/engine":3}],2:[function(a,b){var c=function(a,b,c,d){this.sprite=a,this.width=b,this.height=c,this.columns=d,this.state=0,this.indexX=0,this.indexY=0,this.offsetX=0,this.offsetY=0};c.prototype.setIndexes=function(a,b){this.setIndexX(a),this.setIndexY(b)},c.prototype.setIndexX=function(a){this.indexX=a,this.offsetX=this.width*this.indexX},c.prototype.setIndexY=function(a){this.indexY=a,this.offsetY=this.height*this.indexY},c.prototype.setState=function(a){this.state=a;var b=this.state,c=0;this.columns&&(b=this.state%this.columns,c=Math.floor(this.state/this.columns)),this.setIndexX(b),this.setIndexY(c)},b.exports=c},{}],3:[function(a,b){var c=a("./game"),d=a("./raf"),e=function(a,b){var d=function(a){c.call(this,a)};d.prototype=Object.create(c.prototype);for(var e in b)d.prototype[e]=b[e];this.game=new d(a),this.setupCanvasSize();var f=this;this.game.sprite.load(this.game.load.sprite,this.game.load.spriteImage,function(){f.start()})};e.prototype.addEvents=function(){var a=this;window.addEventListener("resize",function(){a.setupCanvasSize()}),window.addEventListener("blur",function(){a.game.input.resetKeys(),a.game.blur()}),window.addEventListener("focus",function(){a.game.input.resetKeys(),a.game.focus()})},e.prototype.setupCanvasSize=function(){this.game.resize(),this.game.canvas.width=this.game.width,this.game.canvas.height=this.game.height,this.game.isRetina&&this.game.video.scale(2)},e.prototype.start=function(){this.game.init(),this.addEvents(),this.startFrame()},e.prototype.startFrame=function(){this._time=Date.now();var a=this;d(function(){a.tick()})},e.prototype.tick=function(){var a=(Date.now()-this._time)/1e3;a>.016&&(a=.016),this.update(a),this.render(),this.startFrame()},e.prototype.update=function(a){this.game.update(a)},e.prototype.render=function(){this.game.video.ctx.clearRect(0,0,this.game.width,this.game.height),this.game.render()},b.exports=e},{"./game":4,"./raf":7}],4:[function(a,b){var c=a("./video"),d=a("./input"),e=a("./spriteSheetManager"),f=a("./retina"),g=function(a){this.canvas=a,this.video=new c(a),this.width=300,this.height=300,this.load={},this.sprite=new e,this.isRetina=f(),this.input=new d(this),this.config()};g.prototype.init=function(){},g.prototype.config=function(){},g.prototype.resize=function(){},g.prototype.render=function(){},g.prototype.update=function(){},g.prototype.keypress=function(){},g.prototype.click=function(){},g.prototype.mousemove=function(){},g.prototype.focus=function(){},g.prototype.blur=function(){},b.exports=g},{"./input":5,"./retina":8,"./spriteSheetManager":9,"./video":11}],5:[function(a,b){var c=a("./keys"),d=function(a){this.keys={},this.canControlKeys=!0,this.mouse={isDown:!1,position:{x:null,y:null}},this._addEvents(a)};d.prototype.resetKeys=function(){this.keys={}},d.prototype.isKeyDown=function(a){return this.canControlKeys?this.keys[c[a.toUpperCase()]]:void 0},d.prototype._addEvents=function(a){var b=this,c=a.canvas;c.addEventListener("mousemove",function(c){a.mousemove(c.offsetX,c.offsetY),b.mouse.position.x=c.offsetX,b.mouse.position.y=c.offsetY}),c.addEventListener("mouseup",function(){b.mouse.isDown=!1}),c.addEventListener("mousedown",function(a){b.mouse.position.x=a.offsetX,b.mouse.position.y=a.offsetY,b.mouse.isDown=!0}),c.addEventListener("click",function(b){a.click(b.offsetX,b.offsetY)}),document.addEventListener("keypress",function(b){a.keypress(b.keyCode)}),document.addEventListener("keydown",function(b){a.input.keys[b.keyCode]=!0}),document.addEventListener("keyup",function(b){a.input.keys[b.keyCode]=!1})},b.exports=d},{"./keys":6}],6:[function(a,b){b.exports={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190}},{}],7:[function(a,b){b.exports=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()},{}],8:[function(a,b){var c=function(){var a="(-webkit-min-device-pixel-ratio: 1.5),  (min--moz-device-pixel-ratio: 1.5),  (-o-min-device-pixel-ratio: 3/2),  (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(a).matches?!0:!1};b.exports=c},{}],9:[function(a,b){var c=a("./utils").getJSON,d=a("./animation"),e=function(){this.data={},this.animation=d,this.image=null};e.prototype.load=function(a,b,d){if(!a)return setTimeout(d,0);var e=this,f=new Image;f.onload=function(){for(var a in e.data){var b=e.data[a];b.image=f}e.image=f,d()},c(a,function(a){e.data=a,f.src=b})},e.prototype.get=function(a){return this.data[a]},b.exports=e},{"./animation":2,"./utils":10}],10:[function(a,b,c){c.getJSON=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){var a=JSON.parse(this.response);b(a)},c.send()}},{}],11:[function(a,b){var c=function(a){this.canvas=a,this.ctx=a.getContext("2d")};c.prototype.include=function(a){for(var b in a)this[b]=a[b]},c.prototype.scale=function(a){this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px",this.canvas.width*=a,this.canvas.height*=a,this.ctx.scale(a,a)},c.prototype.sprite=function(a,b,c,d,e,f,g){d=d||0,e=e||0,f=f||a.width,g=g||a.height,b=Math.floor(b),c=Math.floor(c);var h=f,i=g;a.source_image.match(/@2x.png$/)&&(h/=2,i/=2),this.ctx.drawImage(a.image,a.x+d,a.y+e,f,g,b,c,h,i)},c.prototype.animation=function(a,b,c){this.sprite(a.sprite,b,c,a.offsetX,a.offsetY,a.width,a.height)},b.exports=c},{}]},{},[1])(1)});